export default(async()=>{function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const a="undefined"!=typeof window;let c=a?()=>window.performance.now():()=>Date.now(),s=a?t=>requestAnimationFrame(t):t;const u=new Set;function d(t){u.forEach((e=>{e.c(t)||(u.delete(e),e.f())})),0!==u.size&&s(d)}let f=!1;function h(t,e,n,o){for(;t<e;){const r=t+(e-t>>1);n(r)<=o?t=r+1:e=r}return t}function m(t,e,n){const o=g(t);if(!o.getElementById(e)){const t=w("style");t.id=e,t.textContent=n,v(o,t)}}function g(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function p(t){const e=w("style");return v(g(t),e),e.sheet}function v(t,e){!function(t,e){t.appendChild(e)}(t.head||t,e)}function _(t,e){if(f){for(function(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if("HEAD"===t.nodeName){const t=[];for(let n=0;n<e.length;n++){const o=e[n];void 0!==o.claim_order&&t.push(o)}e=t}const n=new Int32Array(e.length+1),o=new Int32Array(e.length);n[0]=-1;let r=0;for(let t=0;t<e.length;t++){const i=e[t].claim_order,l=(r>0&&e[n[r]].claim_order<=i?r+1:h(1,r,(t=>e[n[t]].claim_order),i))-1;o[t]=n[l]+1;const a=l+1;n[a]=t,r=Math.max(a,r)}const i=[],l=[];let a=e.length-1;for(let t=n[r]+1;0!=t;t=o[t-1]){for(i.push(e[t-1]);a>=t;a--)l.push(e[a]);a--}for(;a>=0;a--)l.push(e[a]);i.reverse(),l.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<l.length;e++){for(;n<i.length&&l[e].claim_order>=i[n].claim_order;)n++;const o=n<i.length?i[n]:null;t.insertBefore(l[e],o)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);null!==t.actual_end_child&&void 0===t.actual_end_child.claim_order;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?void 0===e.claim_order&&e.parentNode===t||t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else e.parentNode===t&&null===e.nextSibling||t.appendChild(e)}function $(t,e,n){f&&!n?_(t,e):e.parentNode===t&&e.nextSibling==n||t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function x(){return y(" ")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t){return""===t?null:+t}function N(t){return Array.from(t.childNodes)}function T(t,e,n,o,r=!1){!function(t){void 0===t.claim_info&&(t.claim_info={last_index:0,total_claimed:0})}(t);const i=(()=>{for(let o=t.claim_info.last_index;o<t.length;o++){const i=t[o];if(e(i)){const e=n(i);return void 0===e?t.splice(o,1):t[o]=e,r||(t.claim_info.last_index=o),i}}for(let o=t.claim_info.last_index-1;o>=0;o--){const i=t[o];if(e(i)){const e=n(i);return void 0===e?t.splice(o,1):t[o]=e,r?void 0===e&&t.claim_info.last_index--:t.claim_info.last_index=o,i}}return o()})();return i.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,i}function S(t,e,n){return function(t,e,n,o){return T(t,(t=>t.nodeName===e),(t=>{const e=[];for(let o=0;o<t.attributes.length;o++){const r=t.attributes[o];n[r.name]||e.push(r.name)}e.forEach((e=>t.removeAttribute(e)))}),(()=>o(e)))}(t,e,n,w)}function A(t,e){return T(t,(t=>3===t.nodeType),(t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n}),(()=>y(e)),!0)}function C(t){return A(t," ")}function P(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e){t.value=null==e?"":e}function D(t,e,n){t.classList[n?"add":"remove"](e)}function q(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}const V=new Map;let L,O=0;function B(t,e,n,o,r,i,l,a=0){const c=16.666/o;let s="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*i(t);s+=100*t+`%{${l(o,1-o)}}\n`}const u=s+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,f=g(t),{stylesheet:h,rules:m}=V.get(f)||function(t,e){const n={stylesheet:p(e),rules:{}};return V.set(t,n),n}(f,t);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${o}ms linear ${r}ms 1 both`,O+=1,d}function M(t){L=t}function U(){if(!L)throw new Error("Function called outside component initialization");return L}function j(t){U().$$.on_mount.push(t)}const z=[],F=[],G=[],W=[],H=Promise.resolve();let X=!1;function Y(t){G.push(t)}const J=new Set;let K,Q=0;function Z(){const t=L;do{for(;Q<z.length;){const t=z[Q];Q++,M(t),tt(t.$$)}for(M(null),z.length=0,Q=0;F.length;)F.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];J.has(e)||(J.add(e),e())}G.length=0}while(z.length);for(;W.length;)W.pop()();X=!1,J.clear(),M(t)}function tt(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}function et(t,e,n){t.dispatchEvent(q(`${e?"intro":"outro"}${n}`))}const nt=new Set;function ot(t,e){t&&t.i&&(nt.delete(t),t.i(e))}const rt={duration:0};function it(n,o,l,a){let f=o(n,l),h=a?0:1,m=null,g=null,p=null;function v(){p&&function(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),O-=r,O||s((()=>{O||(V.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),V.clear())})))}(n,p)}function _(t,e){const n=t.b-h;return e*=Math.abs(n),{a:h,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(o){const{delay:i=0,duration:l=300,easing:a=e,tick:$=t,css:b}=f||rt,w={start:c()+i,b:o};o||(w.group=void 0,(void 0).r+=1),m||g?g=w:(b&&(v(),p=B(n,h,o,l,i,a,b)),o&&$(0,1),m=_(w,l),Y((()=>et(n,o,"start"))),function(t){let e;0===u.size&&s(d),new Promise((n=>{u.add(e={c:t,f:n})}))}((t=>{if(g&&t>g.start&&(m=_(g,l),g=null,et(n,m.b,"start"),b&&(v(),p=B(n,h,m.b,m.duration,0,a,f.css))),m)if(t>=m.end)$(h=m.b,1-h),et(n,m.b,"end"),g||(m.b?v():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;h=m.a+m.d*a(e/m.duration),$(h,1-h)}return!(!m&&!g)})))}return{run(t){i(f)?(K||(K=Promise.resolve(),K.then((()=>{K=null}))),K).then((()=>{f=f(),$(t)})):$(t)},end(){v(),m=g=null}}}function lt(t,e,o,l){const{fragment:a,on_mount:c,on_destroy:s,after_update:u}=t.$$;a&&a.m(e,o),l||Y((()=>{const e=c.map(n).filter(i);s?s.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(Y)}function at(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(e,n,i,l,a,c,s,u=[-1]){const d=L;M(e);const h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};s&&s(h.root);let m=!1;if(h.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),m&&function(t,e){-1===t.$$.dirty[0]&&(z.push(t),X||(X=!0,H.then(Z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),m=!0,r(h.before_update),h.fragment=!!l&&l(h.ctx),n.target){if(n.hydrate){f=!0;const t=N(n.target);h.fragment&&h.fragment.l(t),t.forEach(b)}else h.fragment&&h.fragment.c();n.intro&&ot(e.$$.fragment),lt(e,n.target,n.anchor,n.customElement),f=!1,Z()}M(d)}class st{$destroy(){at(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ut(t,{delay:n=0,duration:o=400,easing:r=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*i}}function dt(t){m(t,"svelte-18qa7iw","canvas.svelte-18qa7iw{border:1px solid #ccc}")}function ft(e){let n;return{c(){n=w("canvas"),this.h()},l(t){n=S(t,"CANVAS",{width:!0,height:!0,class:!0}),N(n).forEach(b),this.h()},h(){k(n,"width",ht),k(n,"height",mt),k(n,"class","svelte-18qa7iw")},m(t,o){$(t,n,o),e[4](n)},p:t,i:t,o:t,d(t){t&&b(n),e[4](null)}}}const ht=512,mt=512;function gt(t,e,n){const o=function(){const t=U();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=q(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}();let r,i=[],l=null;const a=()=>{i=Array(60);for(let t=0;t<30;t++)i[2*t]=Math.random()*(ht-40)+20,i[2*t+1]=Math.random()*(mt-40)+20;l=null,o("nodesUpdated",i),c()},c=()=>{const t=i.length/2,e=r.getContext("2d");e.clearRect(0,0,ht,mt);for(let n=0;n<t;n++){const t=i[2*n],o=i[2*n+1];e.beginPath(),e.arc(t,o,7,0,2*Math.PI),e.fillStyle="#0288D1",e.fill()}if(null!==l){e.beginPath(),e.moveTo(i[2*l[0]],i[2*l[0]+1]);for(let t=1;t<l.length;t++){const n=l[t];e.lineTo(i[2*n],i[2*n+1])}e.strokeStyle="#757575",e.strokeWidth=2,e.stroke()}};return j((()=>{r.addEventListener("click",(t=>{i.push(t.offsetX,t.offsetY),o("nodesUpdated",i),c()})),a()})),[r,()=>{i=[],l=null,c()},a,t=>{l=t,c()},function(t){F[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}class pt extends st{constructor(t){super(),ct(this,t,gt,ft,l,{reset:1,randomize:2,drawVisits:3},dt)}get reset(){return this.$$.ctx[1]}get randomize(){return this.$$.ctx[2]}get drawVisits(){return this.$$.ctx[3]}}function vt(t){m(t,"svelte-1ifx1we",".hidden.svelte-1ifx1we{display:none}")}function _t(t){let e,n,o,r,i,l,a,c,s,u=t[3].toFixed(2)+"",d=t[4].toFixed(2)+"";return{c(){e=w("div"),n=w("ul"),o=w("li"),r=y("Travel distance of a nearest neighbor solution: "),i=y(u),l=x(),a=w("li"),c=y("Travel distance after annealing: "),s=y(d)},l(t){e=S(t,"DIV",{});var f=N(e);n=S(f,"UL",{});var h=N(n);o=S(h,"LI",{});var m=N(o);r=A(m,"Travel distance of a nearest neighbor solution: "),i=A(m,u),m.forEach(b),l=C(h),a=S(h,"LI",{});var g=N(a);c=A(g,"Travel distance after annealing: "),s=A(g,d),g.forEach(b),h.forEach(b),f.forEach(b)},m(t,u){$(t,e,u),_(e,n),_(n,o),_(o,r),_(o,i),_(n,l),_(n,a),_(a,c),_(a,s)},p(t,e){8&e&&u!==(u=t[3].toFixed(2)+"")&&P(i,u),16&e&&d!==(d=t[4].toFixed(2)+"")&&P(s,d)},d(t){t&&b(e)}}}function $t(t){let e,n,o,i,l,a,c,s,u,d,f,h,m,g,p,v,T,P,q,V,L,O,B,M,U,j,z,F,G,W,H,X,J,K,Q,Z,tt,et;m=new pt({props:{}}),t[10](m),m.$on("nodesUpdated",t[11]);let rt=null!==t[2]&&_t(t);return{c(){var t;e=w("main"),n=w("h1"),o=y("Solving travelling salesman problem with simulated annealing"),i=x(),l=w("p"),a=w("a"),c=y("https://www.fourmilab.ch/documents/travelling/anneal/"),s=x(),u=w("p"),d=y("Click on the canvas below to add nodes."),f=x(),h=w("div"),(t=m.$$.fragment)&&t.c(),g=x(),p=w("button"),v=y("Reset"),T=x(),P=w("button"),q=y("Random"),V=x(),L=w("div"),O=w("label"),B=y("RNG Seed:\n      "),M=w("input"),U=x(),j=w("button"),z=y("Solve"),G=x(),rt&&rt.c(),W=x(),H=w("div"),X=w("div"),J=x(),K=w("div"),this.h()},l(t){e=S(t,"MAIN",{});var r=N(e);n=S(r,"H1",{});var _=N(n);o=A(_,"Solving travelling salesman problem with simulated annealing"),_.forEach(b),i=C(r),l=S(r,"P",{});var $=N(l);a=S($,"A",{href:!0});var w=N(a);c=A(w,"https://www.fourmilab.ch/documents/travelling/anneal/"),w.forEach(b),$.forEach(b),s=C(r),u=S(r,"P",{});var y=N(u);d=A(y,"Click on the canvas below to add nodes."),y.forEach(b),f=C(r),h=S(r,"DIV",{});var x,E,k=N(h);E=k,(x=m.$$.fragment)&&x.l(E),g=C(k),p=S(k,"BUTTON",{});var I=N(p);v=A(I,"Reset"),I.forEach(b),T=C(k),P=S(k,"BUTTON",{});var R=N(P);q=A(R,"Random"),R.forEach(b),k.forEach(b),V=C(r),L=S(r,"DIV",{});var D=N(L);O=S(D,"LABEL",{});var F=N(O);B=A(F,"RNG Seed:\n      "),M=S(F,"INPUT",{type:!0}),F.forEach(b),U=C(D),j=S(D,"BUTTON",{});var Y=N(j);z=A(Y,"Solve"),Y.forEach(b),D.forEach(b),G=C(r),rt&&rt.l(r),W=C(r),H=S(r,"DIV",{class:!0});var Q=N(H);X=S(Q,"DIV",{id:!0}),N(X).forEach(b),J=C(Q),K=S(Q,"DIV",{id:!0}),N(K).forEach(b),Q.forEach(b),r.forEach(b),this.h()},h(){k(a,"href","https://www.fourmilab.ch/documents/travelling/anneal/"),k(M,"type","number"),j.disabled=F=!t[0]||0===t[0].length,k(X,"id","distPlot"),k(K,"id","temperaturePlot"),k(H,"class","svelte-1ifx1we"),D(H,"hidden",null===t[2])},m(r,b){$(r,e,b),_(e,n),_(n,o),_(e,i),_(e,l),_(l,a),_(a,c),_(e,s),_(e,u),_(u,d),_(e,f),_(e,h),lt(m,h,null),_(h,g),_(h,p),_(p,v),_(h,T),_(h,P),_(P,q),_(e,V),_(e,L),_(L,O),_(O,B),_(O,M),R(M,t[1]),_(L,U),_(L,j),_(j,z),_(e,G),rt&&rt.m(e,null),_(e,W),_(e,H),_(H,X),_(H,J),_(H,K),Z=!0,tt||(et=[E(p,"click",t[6]),E(P,"click",t[7]),E(M,"input",t[12]),E(j,"click",t[9])],tt=!0)},p(t,[n]){m.$set({}),2&n&&I(M.value)!==t[1]&&R(M,t[1]),(!Z||1&n&&F!==(F=!t[0]||0===t[0].length))&&(j.disabled=F),null!==t[2]?rt?rt.p(t,n):(rt=_t(t),rt.c(),rt.m(e,W)):rt&&(rt.d(1),rt=null),4&n&&D(H,"hidden",null===t[2])},i(t){Z||(ot(m.$$.fragment,t),Y((()=>{Q||(Q=it(e,ut,{},!0)),Q.run(1)})),Z=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(nt.has(t))return;nt.add(t),(void 0).c.push((()=>{nt.delete(t)})),t.o(e)}}(m.$$.fragment,t),Q||(Q=it(e,ut,{},!1)),Q.run(0),Z=!1},d(n){n&&b(e),t[10](null),at(m),rt&&rt.d(),n&&Q&&Q.end(),tt=!1,r(et)}}}function bt(t,e,n){let o=null;const r=new Go;WebAssembly.instantiateStreaming(fetch("./main.wasm"),r.importObject).then((t=>{r.run(t.instance)}));const i=()=>{const t=vega.changeset().remove((t=>!0));g.change("table",t).run(),p.change("table",t).run()},l=t=>{n(0,o=t)};let a=42,c=null,s=null,u=null;const d=()=>{if(u>=s.length)return void clearInterval(c);const t=s[u],e=t[0],o=t[1],r=t[2],i=t[3];n(4,m=r),f.drawVisits(o);const l=vega.changeset().insert([{iter:e,dist:r}]);g.change("table",l).run(),p.change("table",vega.changeset().insert([{iter:e,temperature:i,temperature:i}])).run(),u+=1};let f,h=null,m=null,g=null,p=null;return j((()=>{window.vegaEmbed("#distPlot",{$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:"Travel Distance",data:{name:"table"},width:500,mark:"line",encoding:{x:{title:"Iteration",field:"iter",type:"quantitative"},y:{title:"Travel distance",field:"dist",type:"quantitative"}}}).then((t=>{g=t.view})),window.vegaEmbed("#temperaturePlot",{$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:"Temperature",data:{name:"table"},width:500,mark:"line",encoding:{x:{title:"Iteration",field:"iter",type:"quantitative"},y:{title:"Temperature",field:"temperature",type:"quantitative"}}}).then((t=>{p=t.view}))})),[o,a,c,h,m,f,()=>{f.reset(),clearInterval(c),n(2,c=null),n(0,o=null),i()},()=>{f.randomize(),clearInterval(c),n(2,c=null),i()},l,()=>{null!==c&&clearInterval(c),i(),s=window.getSearchAnimation("NearestNeighbor",o,a),console.log("animation",s),u=0,n(3,h=s[0][2]),n(4,m=h),n(2,c=setInterval(d,200))},function(t){F[t?"unshift":"push"]((()=>{f=t,n(5,f)}))},t=>l(t.detail),function(){a=I(this.value),n(1,a)}]}return new class extends st{constructor(t){super(),ct(this,t,bt,$t,l,{},vt)}}({target:document.querySelector("#__snel"),props:{}}),{}})();